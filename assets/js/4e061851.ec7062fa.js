"use strict";(self.webpackChunkredis=self.webpackChunkredis||[]).push([[4501],{2110:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"tutorial-basics/xlen","title":"XLEN","description":"The Redis XLEN command is very similar to calling .size() or .length on a list or collection in Java, Python, or JavaScript.","source":"@site/docs/tutorial-basics/05-xlen.mdx","sourceDirName":"tutorial-basics","slug":"/tutorial-basics/xlen","permalink":"/spring-data-redis-streams/docs/tutorial-basics/xlen","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/tutorial-basics/05-xlen.mdx","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"XREVRANGE","permalink":"/spring-data-redis-streams/docs/tutorial-basics/xrevrange"},"next":{"title":"XINFO STREAM","permalink":"/spring-data-redis-streams/docs/tutorial-basics/xinfo-stream"}}');var i=r(4848),s=r(8453);const a={sidebar_position:5},o="XLEN",l={},c=[{value:"Why is XLEN so Fast?",id:"why-is-xlen-so-fast",level:2},{value:"Use Cases for XLEN",id:"use-cases-for-xlen",level:2},{value:"Spring Boot Example (Using Spring Data Redis)",id:"spring-boot-example-using-spring-data-redis",level:2},{value:"Example: curl to query",id:"example-curl-to-query",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"xlen",children:"XLEN"})}),"\n",(0,i.jsxs)(n.p,{children:["The Redis XLEN command is very similar to calling ",(0,i.jsx)(n.code,{children:".size()"})," or ",(0,i.jsx)(n.code,{children:".length"})," on a list or collection in Java, Python, or JavaScript."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"XLEN [key]\n"})}),"\n",(0,i.jsx)(n.p,{children:"It returns the total number of entries in the stream."}),"\n",(0,i.jsx)(n.p,{children:"Example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"XLEN race:france\n(integer) 50\n"})}),"\n",(0,i.jsx)(n.p,{children:"This is exactly like:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"List<String> streamEntries = ...;\nint size = streamEntries.size();  // same as XLEN\n"})}),"\n",(0,i.jsx)(n.h2,{id:"why-is-xlen-so-fast",children:"Why is XLEN so Fast?"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"XLEN"})," has ",(0,i.jsx)(n.strong,{children:"O(1)"})," time complexity \u2014 meaning it takes the same amount of time regardless of how many entries exist."]}),"\n",(0,i.jsx)(n.li,{children:"Redis keeps track of the stream length internally as metadata, so it doesn't need to iterate over entries."}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"O(1)"})," \u2014 pronounced ",(0,i.jsx)(n.strong,{children:'"Big O of 1"'})," \u2014 means the operation takes constant time, regardless of input size."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"use-cases-for-xlen",children:"Use Cases for XLEN"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Pagination (e.g., to compute total pages)"}),"\n",(0,i.jsx)(n.li,{children:"Monitoring / dashboards"}),"\n",(0,i.jsx)(n.li,{children:"Stream health checks (e.g., is stream empty?)"}),"\n",(0,i.jsx)(n.li,{children:"Debugging Redis stream state"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"spring-boot-example-using-spring-data-redis",children:"Spring Boot Example (Using Spring Data Redis)"}),"\n",(0,i.jsx)(n.p,{children:"You can create a new Spring Boot project or reuse your existing project. Here's how to integrate XLEN into your app by adding a controller class."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"spring init -d=web,data-redis,devtools,thymeleaf,lombok \\\n  -g com.example \\\n  -a demo \\\n  -p jar \\\n  --build maven \\\n  xlen -x\n"})}),"\n",(0,i.jsx)(n.p,{children:"add the following to application.yaml"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"spring:\n  data:\n    redis:\n      host: localhost\n      port: 6379\n"})}),"\n",(0,i.jsxs)(n.p,{children:["If you're reusing an existing project (like xrange or race",":france","), simply add this private static controller class inside your DemoApplication:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'import lombok.RequiredArgsConstructor;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.data.domain.Range;\nimport org.springframework.data.redis.connection.stream.MapRecord;\nimport org.springframework.data.redis.core.StreamOperations;\nimport org.springframework.data.redis.connection.Limit;\nimport org.springframework.data.redis.core.StringRedisTemplate;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport java.util.List;\n\n@SpringBootApplication\npublic class DemoApplication {\n\n\tpublic static void main(String[] args) {\n\t\tSpringApplication.run(DemoApplication.class, args);\n\t}\n\n}\n\n@RestController\n@RequestMapping("/api/race")\n@RequiredArgsConstructor\nclass StreamLengthController {\n\n\tprivate final StringRedisTemplate redisTemplate;\n\n\t@GetMapping("/length")\n\tpublic Long getStreamLength(@RequestParam(defaultValue = "race:france") String streamKey) {\n\t\tStreamOperations<String, Object, Object> streamOps = redisTemplate.opsForStream();\n\t\treturn streamOps.size(streamKey);  // This is like XLEN in Redis\n\t}\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"example-curl-to-query",children:"Example: curl to query"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'curl "http://localhost:8080/api/race/length?streamKey=race:france"\n\n(50)\n'})})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>o});var t=r(6540);const i={},s=t.createContext(i);function a(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);